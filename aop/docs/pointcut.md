### 포인트컷 지시자

에스펙트J에서 포인트컷을 편리하게 표현하기 위한 표현식

**"포인트컷 지시자"**

포인트컷 지시자는 `execution` 같은 포인터컷 지시자(Pointcut Designator)로 시작한다. 줄여서 `PCD` 라 한다.

- ### 종류
    - `execution`: 메소드 실행 조인 포인트를 매칭한다. 스프링 AOP에서 가장 많이 사용하고, 기능도 복잡하다.
    - `within`: 특정 타입 내의 조인 포인트를 매칭한다.
    - `args`: 인자가 주어진 타입의 인스턴스인 조인 포인트
    - `this`: 스프링 빈 객체(스프링 AOP 프록시)를 대상으로 하는 조인 포인트
    - `target`: Target 객체(스프링 AOP 프록시가 가르키는 실제 대상)를 대상으로 하는 조인 포인트
    - `@target`: 실행 객체의 클래스에 주어진 타입의 애노테이션이 있는 조인 포인트
    - `@within`: 주어진 애노테이션이 있는 타입 내 조인 포인트
    - `@annotation`: 메서드가 주어진 애노테이션을 가지고 있는 조인 포인트를 매칭
    - `@args`: 전달된 실제 인수의 런타임 타입이 주어진 타입의 애노테이션을 갖는 조인 포인트
    - `bean`: 스프링 전용 포인트컷 지시자, 빈의 이름으로 포인트컷을 지정한다.

> `execution`을 가장 많이 사용하고, 나머지는 자주 사용하지 않는다.

### execution 1

```
execution(modifiers-pattern? ret-type-pattern declaring-type-pattern?name-pattern(param-pattern) throws-pattern?)
execution(접근제어자? 반환타입 선언타입?메서드이름(파라미터) 예외?)
```

- 메소드 실행 조인 포인트를 매칭한다.
- ?는 생략할 수 있다.
- \* 같은 패턴을 지정할 수 있다.
- \* 은 아무 값이 들어와도 된다는 뜻이다.
- 파라미터에서 `..` 은 파라미터의 타입과 파라미터 수가 상관없다는 뜻이다.
- 패키지에서 `.` , `..` 의 차이를 이해해야 한다.
    - `.` : 정확하게 해당 위치의 패키지
    - `..` : 해당 위치의 패키지와 그 하위 패키지도 포함
- 클래스를 부모타입으로 해도 매칭된다. 이런 경우를 `typeMatch` 라고 한다.
    - 만약 부모타입으로 했을 경우 해당 메소드들이 부모가 가지고 있어야 한다.
    - `typeMatchNoSupperTypeMethodFalse` 테스트 코드 참고

execution 파라미터 매칭 규칙은 다음과 같다.

- (String) : 정확하게 String 타입 파라미터
- () : 파라미터가 없어야 한다.
- (*) : 정확히 하나의 파라미터, 단 모든 타입을 허용한다.
- (*, *) : 정확히 두 개의 파라미터, 단 모든 타입을 허용한다.
- (..) : 숫자와 무관하게 모든 파라미터, 모든 타입을 허용한다. 참고로 파라미터가 없어도 된다. 0..* 로 이해하면 된다.
- (String, ..) : String 타입으로 시작해야 한다. 숫자와 무관하게 모든 파라미터, 모든 타입을 허용한다.
    - 예) (String) , (String, Xxx) , (String, Xxx, Xxx) 허용
